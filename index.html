<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Ø¯ÛŒÙˆØ§Ø± Ø±ÙˆØ³ØªØ§ â€” Yari</title>
<style>
    body{
        font-family: sans-serif;
        direction: rtl;
        background:#f2f2f2;
        margin:0;
        padding:0;
    }

    .container{
        width:90%;
        max-width:700px;
        margin:auto;
        padding:20px;
    }

    button{
        padding:10px 15px;
        background:#007bff;
        border:none;
        color:white;
        border-radius:6px;
        cursor:pointer;
    }
    button:hover{ background:#005fcc; }

    .card{
        background:white;
        padding:12px;
        margin-bottom:12px;
        border-radius:7px;
        box-shadow:0 0 3px rgba(0,0,0,0.2);
    }

    .hidden{display:none;}

    input,textarea{
        width:100%;
        padding:8px;
        margin-bottom:10px;
        border-radius:6px;
        border:1px solid #aaa;
    }

    .error{
        background:#ffe1e1;
        border:1px solid red;
        padding:10px;
        margin:10px 0;
    }

</style>
</head>
<body>

<div class="container" id="pageHome">
    <h1>ğŸŒ¾ Ø¯ÛŒÙˆØ§Ø± Ø±ÙˆØ³ØªØ§</h1>
    <p>Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ â€” Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§</p>

    <button onclick="showPage('pageAdd')">â• Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ</button>
    <button onclick="showPage('pageList')">ğŸ“‹ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§</button>
</div>


<!-- ØµÙØ­Ù‡ Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ -->
<div class="container hidden" id="pageAdd">
    <h2>Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ ğŸ“</h2>

    <input id="title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø¢Ú¯Ù‡ÛŒ">
    <input id="price" placeholder="Ù‚ÛŒÙ…Øª (ØªÙˆÙ…Ø§Ù†)">
    <textarea id="desc" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª"></textarea>

    <div id="errBox"></div>

    <button onclick="addAd()">ğŸ“Œ Ø«Ø¨Øª Ù†Ù‡Ø§ÛŒÛŒ</button>
    <button onclick="showPage('pageHome')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
</div>


<!-- ØµÙØ­Ù‡ Ù†Ù…Ø§ÛŒØ´ Ø¢Ú¯Ù‡ÛŒ Ù‡Ø§ -->
<div class="container hidden" id="pageList">
    <h2>ğŸ“¢ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ Ø«Ø¨Øª Ø´Ø¯Ù‡</h2>
    <div id="adsBox">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>
    <br>
    <button onclick="showPage('pageHome')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
</div>


<script>
// Ø¢Ø±Ø§ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§
let ads = [];

// ØªØºÛŒÛŒØ± ØµÙØ­Ù‡
function showPage(id){
    document.querySelectorAll(".container").forEach(c=>c.classList.add("hidden"));
    document.getElementById(id).classList.remove("hidden");

    // Ù‡Ù†Ú¯Ø§Ù… ÙˆØ±ÙˆØ¯ Ø¨Ù‡ ØµÙØ­Ù‡ Ù„ÛŒØ³ØªØŒ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ù†
    if(id === "pageList") loadAds();
}

// Ù†Ù…Ø§ÛŒØ´ Ø®Ø·Ø§
function showError(msg){
    document.getElementById("errBox").innerHTML = `<div class="error">${msg}</div>`;
}

// Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ Ø¬Ø¯ÛŒØ¯
function addAd(){
    const titleEl = document.getElementById("title");
    const priceEl = document.getElementById("price");
    const descEl = document.getElementById("desc");

    const title = titleEl.value.trim();
    const price = priceEl.value.trim();
    const desc = descEl.value.trim();

    if(!title || !price){
        showError("Ø¹Ù†ÙˆØ§Ù† Ùˆ Ù‚ÛŒÙ…Øª Ø§Ù„Ø²Ø§Ù…ÛŒ Ù‡Ø³ØªÙ†Ø¯");
        return;
    }

    if(isNaN(price) || Number(price) <= 0){
        showError("Ù‚ÛŒÙ…Øª Ø¨Ø§ÛŒØ¯ Ø¹Ø¯Ø¯ÛŒ Ù…Ø«Ø¨Øª Ø¨Ø§Ø´Ø¯");
        return;
    }

    // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ø¢Ø±Ø§ÛŒÙ‡
    ads.push({
        title: title,
        price: Number(price),
        desc: desc,
        time: Date.now()
    });

    // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙØ±Ù…
    titleEl.value = "";
    priceEl.value = "";
    descEl.value = "";
    showPage('pageHome');
}

// Ù†Ù…Ø§ÛŒØ´ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§
function loadAds(){
    const box = document.getElementById("adsBox");
    box.innerHTML = "";

    if(ads.length === 0){
        box.innerHTML = "Ù‡ÛŒÚ† Ø¢Ú¯Ù‡ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡.";
        return;
    }

    // Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø²Ù…Ø§Ù† Ø«Ø¨Øª
    ads.slice().reverse().forEach(a=>{
        const date = new Date(a.time).toLocaleString("fa-IR");
        box.innerHTML += `
            <div class="card">
                <b>${a.title}</b> â€” ${a.price} ØªÙˆÙ…Ø§Ù†<br>
                ${a.desc}<br>
                <small style="color:#555">ØªØ§Ø±ÛŒØ® Ø«Ø¨Øª: ${date}</small>
            </div>
        `;
    });
}
</script>
</body>
</html>
